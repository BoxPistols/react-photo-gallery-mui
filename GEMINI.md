# GEMINI.md

## プロジェクト概要

このプロジェクトは、モダンなフォトギャラリーとライトボックス機能を備えたReactベースのWebアプリケーションです。Next.js 15、TypeScript 5.7、Material-UI (MUI) 7.3を使用して構築されており、PhotoSwipe 5.4を使用してギャラリーのライトボックス機能を実現しています。アプリケーションはTailwind CSS 4.1でスタイリングされ、カスタム画像ズームコンポーネントも含まれています。ギャラリーは、撮影日、場所、タグなどのメタデータと共にドローン検査の画像を表示するように設計されています。

プロジェクトは適切に構造化されており、ページ、コンポーネント、ユーティリティ間の関心の分離が明確です。また、Storybook 9.1によるコンポーネント開発、Vitest 3.2によるテスト、ESLint 9.17とPrettier 3.6によるコード品質向上のための包括的な開発ツールセットも含まれています。

## ビルドと実行

このプロジェクトは`pnpm`をパッケージマネージャーとして使用しています。

### 開発

開発サーバーを開始するには、以下を実行してください：

```bash
pnpm dev
```

これにより、Next.js開発サーバーが`http://localhost:3000`で開始されます。

### ビルド

このプロジェクトには2つのビルドコマンドがあります：

- `pnpm build`: このコマンドはNext.jsアプリケーションを本番用にビルドします。出力は`.next`ディレクトリに保存されます。
- `pnpm build-storybook`: このコマンドはStorybookをビルドして静的ファイルを生成します。出力は`storybook-static`ディレクトリに保存されます。

アプリケーションの本番ビルドを作成するには、以下を実行してください：

```bash
pnpm build
```

Storybookをビルドするには、以下を実行してください：

```bash
pnpm build-storybook
```

### 実行

本番サーバーを開始するには、以下を実行してください：

```bash
pnpm start
```

これにより、Next.js本番サーバーが開始されます。

### テスト

ユニットテストを実行するには、以下を実行してください：

```bash
pnpm test
```

これにより、Vitestを使用してテストが実行されます。

UI付きでテストを実行するには：

```bash
pnpm test:ui
```

カバレッジレポート付きでテストを実行するには：

```bash
pnpm test:coverage
```

### Storybook

Storybook開発サーバーを開始するには、以下を実行してください：

```bash
pnpm storybook
```

これにより、Storybookサーバーが`http://localhost:6006`で開始されます。

## 開発規約

### パッケージマネージャー

このプロジェクトは`pnpm`をパッケージ管理に使用しています。依存関係のインストール、追加、削除には`pnpm`を使用してください。

### コードスタイル

このプロジェクトは、ESLintとPrettierを使用して一貫したコードスタイルを強制しています。Huskyを使用したpre-commitフックが設定されており、コミット前にコードが自動的にリントとフォーマットされます。

以下のコマンドも手動で実行できます：

- `pnpm lint`: リンティングエラーをチェックします。
- `pnpm lint:fix`: リンティングエラーを自動修正します。
- `pnpm format`: Prettierでコードをフォーマットします。
- `pnpm fix`: リンティングとフォーマットの問題を自動修正します。
- `pnpm check`: すべてのチェック（型チェック、リンティング、フォーマット）を実行します。
- `pnpm type-check`: TypeScriptの型チェックのみを実行します。

### コンポーネント開発

コンポーネントは、Storybookを使用して分離された環境で開発されます。`src/components`ディレクトリでコンポーネントのストーリーを作成できます。

### スタイリング

このプロジェクトは、Material-UI (MUI)とTailwind CSSの組み合わせを使用してスタイリングを行っています。2つの間の競合を避けるため、Tailwind CSS設定で`important: true`オプションが有効になっています。コンポーネントのスタイリング時は、可能な限りTailwind CSSユーティリティクラスの使用が推奨されます。

### TypeScript設定

プロジェクトは厳格なTypeScript設定を使用しており、以下の特徴があります：

- `strict: true`が有効
- ES2022ターゲット
- パスエイリアス（`@/*`、`@/components/*`など）が設定済み
- 型安全性を重視したESLintルールが設定済み

### テスト環境

- **Vitest**: 高速なテストランナー
- **Testing Library**: Reactコンポーネントのテスト
- **jsdom**: ブラウザ環境のシミュレーション
- **カバレッジレポート**: V8カバレッジツールを使用

### 開発ツール

- **ESLint**: コード品質とスタイルの強制
- **Prettier**: コードフォーマット
- **Husky**: Gitフックの管理
- **lint-staged**: ステージされたファイルのみのリンティング
- **Storybook**: コンポーネント開発とドキュメント

## 技術スタック

### フロントエンド

- **React 19.1**: 最新のReactバージョン
- **Next.js 15.5**: App Router対応の最新バージョン
- **TypeScript 5.7**: 厳格な型システム

### UIライブラリ

- **Material-UI 7.3**: 最新のMUIバージョン
- **Tailwind CSS 4.1**: 最新のTailwind CSS
- **PhotoSwipe 5.4**: 高性能なライトボックスライブラリ

### 状態管理

- **Zustand 5.0**: 軽量な状態管理
- **React Query 5.6**: サーバー状態管理

### 開発環境

- **Node.js**: 20.0.0以上が必要
- **pnpm**: 9.12.3を使用
- **Vite**: 7.1.3（Storybook用）
